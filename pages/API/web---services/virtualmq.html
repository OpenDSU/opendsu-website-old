<psk-page title="VirtualMQ API">
    <psk-highlight type-of-highlight="note">
        The PSK Web Server's VirtualMQ component allows the communication between PrivateSky nodes. It also allows the communication
        between different processes inside a PrivateSky node.
    </psk-highlight>
    <psk-toc title="Table of contents"></psk-toc>
    <psk-chapter title="create channel">
        Creates a communication channel with the specified name.
        <psk-card title="Syntax">
            <psk-list list-type="unordered">
                <psk-card title="URL">
                    <code>/create-channel/:channelName</code>
                </psk-card>
                <psk-card title="Method">
                    <code>PUT</code>
                </psk-card>
                <psk-card title="URL Params">
                    <code>channelName = [alphanumeric]</code>
                </psk-card>
                <psk-card title="Data Params">
                    Content-Type: <code>text/plain</code><br>
                    Content: <code>public key</code>
                </psk-card>
                <psk-card title="Success Response">
                    Code: <code>200 OK</code><br>
                    Content-type: <code>text/plain</code><br>
                    Content: <code>token</code>
                </psk-card>
            </psk-list>
        </psk-card>
    </psk-chapter>

    <psk-chapter title="forward channel">
        Forwards the messages received in the specified channel to zero-mq.
        <psk-card title="Syntax">
            <psk-list list-type="unordered">
                <psk-card title="URL">
                    <code>/forward-zeromq/:channelName</code>
                </psk-card>
                <psk-card title="Method">
                    <code>POST</code>
                </psk-card>
                <psk-card title="URL Params">
                    <code>channelName = [alphanumeric]</code>
                </psk-card>
                <psk-card title="Data Params">
                    Content-Type: <code>text/plain</code><br>
                    Content: <code>signature</code>
                </psk-card>
                <psk-card title="Success Response">
                    Code: <code>200 OK</code><br>
                    Content: <code>None</code>
                </psk-card>
                <psk-card title="Error Response">
                    Code: <code>400</code>
                    Reason: Invalid request parameters.
                </psk-card>
            </psk-list>
        </psk-card>
    </psk-chapter>
    <psk-chapter title="send message">
        Puts the provided data in the specified channel.
            <psk-card title="Syntax">
            <psk-list list-type="unordered">
                <psk-card title="URL">
                    <code>/send-message/:channelName</code>
                </psk-card>
                <psk-card title="Method">
                    <code>POST</code>
                </psk-card>
                <psk-card title="URL Params">
                    <code>channelName = [alphanumeric]</code>
                </psk-card>
                <psk-card title="Data Params">
                    Content-Type: <code>application/octet-stream</code><br>
                    Content: <code>data</code>
                </psk-card>
                <psk-card title="Success Response">
                    Code: <code>200 OK</code><br>
                    Content: <code>None</code>
                </psk-card>
                <psk-card title="Error Response">
                    <psk-list list-type="unordered">
                        <p>
                            Code: <code>403</code><br>
                            Reason: The channel does not exist.
                        </p>
                        <p>
                            Code: <code>400</code><br>
                            Reason: Invalid message data.
                        </p>
                        <p>
                            Code: <code>411</code><br>
                            Reason: Wrong content length header received.
                        </p>

                    </psk-list>
                </psk-card>
            </psk-list>
        </psk-card>
    </psk-chapter>
    <psk-chapter title="receive message">
        Retrieves a message from the specified channel.
        <psk-card title="Syntax">
            <psk-list list-type="unordered">
                <psk-card title="URL">
                    <code>/receive-message/:channelName</code>
                </psk-card>
                <psk-card title="Method">
                    <code>GET</code>
                </psk-card>
                <psk-card title="URL Params">
                    <code>channelName = [alphanumeric]</code>
                </psk-card>
                <psk-card title="Success Response">
                    Code: <code>200 OK</code><br>
                    Content-Type: <code>application/octet-stream</code><br>
                    Content: <code>data stream</code>
                </psk-card>
                <psk-card title="Error Response">
                    <psk-list list-type="unordered">
                        <p>
                            Code: <code>403</code><br>
                            Reason: The channel does not exist.
                        </p>
                        <p>
                            Code: <code>409</code><br>
                            Reason: Invalid data.
                        </p>

                    </psk-list>
                </psk-card>
            </psk-list>
        </psk-card>
    </psk-chapter>
</psk-page>