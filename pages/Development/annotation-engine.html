<psk-page title="Advanced topics">
    <psk-toc title="Table of contents"></psk-toc>

  <psk-chapter title="Annotations and aspect-oriented programming">
  	<p align="justify"><b>Aspect-oriented programming (AOP)</b> is a programming paradigm that extends modularization due to the fact that it allows the separation of deep cross-cutting relationships into orthogonal aspects of behaviors. Traditional modules encapsulate participants (actors) and contain the code necessary for them to implement system services. Aspect-oriented programming modules contain the code required to implement a single service of the system, taking into account all possible actors. In other words, the aspect-oriented modules cross-cut the usage methods. The UAIC team, together with DPO researchers, is investigating ways to apply AOP for programming swarm-type executable choreographies.</p>
  </psk-chapter>

  <psk-chapter title="Types of swarms that can benefit from annotations. Approaches.">
  	<psk-table title = "Types of swarms that can benefit from annotations. Approaches." dimensions="50|50" header="true">
    	Type | Aspects that can be programmed using AOP with annotations
    	flow | checking data types
    	swarm (verifiable choreography) | checking data types
    	encrypted choreography | checking data types
    	| automatic encryption / decryption
    	| automatic signature / verification
        serverless choreography | checking data types
        asset | checking value data types
        | checking reference data types
        |	generate GraphQL schemes
        |	GraphQL code generation for queries
        |	GraphQL code generation for mutations
        |	indexing assets
        transaction | checking data types
        choreographic smart contract | checking data types
        |  use in assets
    </psk-table><br>

    <psk-table title = "Use cases of the Annotations identified" dimensions="50|50" header="true">
    	<b>Use cases</b> | <b>Description</b>
    	value data types | Annotations can be used to type (validate and verify) the properties of swarms. Value type data types are int, number, string, data, JSON
    	embedded object datÄƒ types | The initial implementation can be based on the JSON value data type
    	reference data types | This type of data refers only to assets referenced from another asset (specific to smart contracts)
    	Integration with GraphQL | generate schema description (SDL)
    	| automatic generation of Queries
    	| automatic generation of Mutations
    	encrypted choreographies and smart contracts that use encryption | The use of security contexts can be facilitated by the use of annotations that mark the fact that the data must be encrypted, decrypted, signed or authenticated.
    	indexing assets in the blockchain | assets can have fields annotated with index annotation which signals that world state cache will index assets after that field to speed query
    </psk-table>
  </psk-chapter>

  <psk-chapter title="Syntax of Annotations">
  	<p align="justify">We will use the EBNF (Extended Backus-Naur Form) to describe the specific syntax of the new annotation mechanisms achieved through research in collaboration with the DPO.</p>

  <psk-img title="Swarm variable syntax definition" src="/assets/images/newlook/SwarmVariableSyntax.svg"></psk-img>
  <psk-img title="Annotations syntax definition" src="/assets/images/newlook/Annotations.svg"></psk-img>

</psk-chapter>


<psk-chapter title="Mechanism for semantic annotation implementation">
	<psk-img src="/assets/images/newlook/AnnotationEngine.png" title="Annotation Engine Mechanism"></psk-img>
	<p align="justify">The proposed implementation in the discussions with DPO is to have a generic Annotation Engine (AE) component capable of recording new types of annotations. We have currently identified several types of events that trigger an internal communication with AE:</p>
	<ul>
		<li>When uploading a scheme, it may be necessary to create certain initializations in one or more annotations registered in the AE</li>
		<li>When handling an instance of a swarm object</li>
			<ul>
				<li>Creating an instance</li>
				<li>When assigning a value to a variable in an instance</li>
			</ul>
		<li>When creating a new asset for the current blockchain replica (happens when a block is validated and the state world cache update)</li>
		<li>When serializing and deserializing a swarm</li>
	</ul>
	<p align="justify">The implementation will be routed through joint activities with DPO until a successful implementation is obtained (optimal especially from the point of view of minimizing the number of notifications sent by the AE to annotations). At this time of reporting, the optimal implementation has not yet been achieved.</p>
	<p align="justify">In the next period we will research and discover ways to better define the style of definition by annotating the interactions with security contexts for a better implementation of encrypted choreographies. Also, after the integration of the AE, we will start the effective development of the different types of annotations identified in this document.</p>
</psk-chapter>
</psk-page>
