import{g as t}from"./p-83ba3037.js";import{o as e}from"./p-93fcdef3.js";window.cardinal=window.cardinal||{},window.cardinal.oldCustomTheme=window.cardinal.oldCustomTheme||{};const{oldCustomTheme:n}=window.cardinal;n.dependencies=n.dependencies||{},n.imports=n.imports||{},n.appTheme=n.appTheme||null;const{dependencies:o,imports:s}=n,c=/@import.*?["']([^"']+)["'].*?;/g;function i(t){return new Promise((e,n)=>{fetch(t).then(t=>{if(t.ok)return e(t.text());n({url:t.url,status:t.status,statusText:t.statusText})})})}window.cardinal=window.cardinal||{},window.cardinal.customTheme=window.cardinal.customTheme||{THEME:void 0,IMPORTS:{},EVENTS:{GET_THEME:"getThemeConfig",ADD_STYLE:"CustomTheme:add-style",REMOVE_STYLE:"CustomTheme:remove-style"}};const a=window.cardinal.customTheme;async function l(t){const n=t.tagName.toLowerCase(),o=t.mode||t.getAttribute("mode")||"default",s=`${window.basePath}themes/${a.THEME}/components/${n}/${n+("default"!==o?"."+o:"")+".css"}`;if(!a.IMPORTS[s]){const[t,e]=await async function(t){try{const e=await fetch(t);return[!0,await e.text()]}catch(t){return console.log(t),[!1]}}(s);if(!t)return;a.IMPORTS[s]=e}const c=a.IMPORTS[s];t.shadowRoot?(function(t){const e=t.host,n={true:{},false:{}};e.addEventListener(a.EVENTS.ADD_STYLE,o=>{o.preventDefault(),o.stopImmediatePropagation();const{data:{tag:s,slotted:c},callback:i}=o.detail;n[c][s]||(i(void 0,c?{target:e}:{target:t}),n[c][s]=!0)}),e.addEventListener(a.EVENTS.REMOVE_STYLE,t=>{t.preventDefault(),t.stopImmediatePropagation();const{data:{tag:e,slotted:o}}=t.detail;n[o][e]=!1})}(t.shadowRoot),e(t.shadowRoot,c)):(t.isSlotted=function(t){for(;t.parentElement;){if(t.parentElement.shadowRoot)return t.parentElement.shadowRoot.host===t.parentNode;t=t.parentElement}return!1}(t),t.dispatchEvent(new CustomEvent(a.EVENTS.ADD_STYLE,{bubbles:!0,cancelable:!0,composed:!0,detail:{data:{tag:n,slotted:t.isSlotted},callback:async(t,n)=>{if(t)return console.log(t);const{target:o}=n;e(o,c)}}})))}const r={VERSIONS:[{ref:function(){let e=t=>{let e={};t.addEventListener("styleExists",n=>{n.stopImmediatePropagation(),n.preventDefault();let o=n.detail.componentTag;(0,n.detail.callback)(void 0,e.hasOwnProperty(o),t),e[o]||(e[o]=!0)}),t.addEventListener("componentWasRemoved",t=>{let n=t.detail.componentTag;e[n]&&delete e[n]})};return e(document.querySelector("body")),a=>{const{componentWillLoad:l,disconnectedCallback:r}=a;a.componentWillLoad=function(){const a=t(this);if(a){let t=t=>{let n=a.tagName.toLowerCase(),r=e=>new Promise(a=>{let r=window.basePath+"themes/"+t+"/components/"+n+"/"+n+".css";o[r]||(o[r]=new Promise((t,e)=>{i(r).then(e=>{t(e)}).catch(e)})),o[r].then(t=>{var n,a;(n=r,a=t,s[n]||(s[n]=new Promise((t,e)=>{c.exec(a)?a.replace(c,(n,s)=>{o[s]||(o[s]=i(s)),o[s].then(e=>{t(a.replace(n,e))}).catch(e)}):t(a)})),s[n]).then(t=>{let n=document.createElement("style");n.innerHTML=t,e.append(n)})}).catch(t=>{console.log(`Request on resource ${t.url} ended with status: ${t.status} (${t.statusText})`)}).finally(()=>{a(l&&l.call(this))})});return a.shadowRoot?(e(a),r(a.shadowRoot)):new Promise(a.isConnected?t=>{let e=function t(e,n){return!!n&&(n.shadowRoot?e.parentNode===n.shadowRoot.host:t(n,n.parentElement))}(a,a.parentElement);a.isSlotted=e;let o=new CustomEvent("styleExists",{bubbles:!0,cancelable:!0,composed:!0,detail:{callback:(n,o,s)=>{n?console.log(n):o?t(l&&l.call(this)):(e||(s=s.shadowRoot),r(s).then(()=>{t()}))},componentTag:e?"SLOTTED:"+n:n}});a.dispatchEvent(o)}:t=>{t(l&&l.call(this))})};return n.appTheme?t(n.appTheme):new Promise(e=>{let o=new CustomEvent("getThemeConfig",{bubbles:!0,cancelable:!0,composed:!0,detail:(o,s)=>{if(o)return console.log(o);n.appTheme=s,t(n.appTheme).then(()=>{e()})}});a.dispatchEvent(o)})}return l&&l.call(this)},a.disconnectedCallback=function(){const e=t(this);let n=e.tagName.toLowerCase();e.isSlotted&&(n="SLOTTED:"+n);let o=new CustomEvent("componentWasRemoved",{bubbles:!0,cancelable:!0,composed:!0,detail:{componentTag:n}});e.dispatchEvent(o),r&&r.call(this)}}},version:"v1.0"},{ref:function(){return e=>{const{componentWillLoad:n,disconnectedCallback:o}=e;e.componentWillLoad=async function(){const e=t(this);return(e||e.isConnected)&&(a.THEME?await l(e):await async function(t,e){t.dispatchEvent(new CustomEvent(a.EVENTS.GET_THEME,{bubbles:!0,cancelable:!0,composed:!0,detail:async(n,o)=>{if(n)return console.log(n);a.THEME=o,await e(t)}}))}(e,l)),n&&n.call(this)},e.disconnectedCallback=async function(){const e=t(this);return e.dispatchEvent(new CustomEvent(a.EVENTS.REMOVE_STYLE,{bubbles:!0,cancelable:!0,composed:!0,detail:{data:{tag:e.tagName.toLowerCase(),slotted:!!e.isSlotted}}})),o&&o.call(this)}}},version:"v2.0"}]},d=window.customThemeVersion,u=([1,2].includes(d)?r.VERSIONS[d-1]:r.VERSIONS[0]).ref;export{u as C}